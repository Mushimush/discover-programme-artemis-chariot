; PlatformIO Project Configuration File for ESP32-CAM TFLite
;
; Build options: build flags, source filter
; Upload options: custom upload port, speed and extra flags
; Library options: dependencies, extra library storages
; Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[env:esp32cam]
platform = espressif32@6.4.0
board = esp32cam
framework = arduino

; Serial monitor speed
monitor_speed = 115200

; Use partition scheme with more app space for ML models
; Options: default, minimal, no_ota, huge_app, min_spiffs
board_build.partitions = huge_app.csv

; Enable PSRAM (required for ML models and camera)
; ESP32-CAM typically has 4MB PSRAM
board_build.arduino.memory_type = qio_qspi

; Build flags
build_flags =
    ; Enable PSRAM
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue

    ; Camera settings
    -DCAMERA_MODEL_AI_THINKER

    ; Optimize for size (models are large)
    -Os

    ; Enable C++11 features (required by TFLite)
    -std=gnu++11

; Library dependencies
lib_deps =
    ; ESP32 Camera driver (built into espressif32 platform)
    ; Edge Impulse library is in lib/ folder

; Upload settings
; Adjust upload_port if needed (automatic detection usually works)
; upload_port = /dev/cu.usbserial-*

; Upload speed (115200 is safe, 921600 is faster but less reliable)
upload_speed = 115200

; Monitor filters
; Uncomment to enable features:
; monitor_filters =
;     colorize
;     time
;     esp32_exception_decoder

; Additional configuration for debugging
; Uncomment to enable:
; build_type = debug
; debug_tool = esp-prog
; debug_init_break = tbreak setup
